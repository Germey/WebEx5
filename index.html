<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>录入信息</title>   
        <!-- Bootstrap -->
        <link href="css/bootstrap.min.css" rel="stylesheet">
		<link href="css/style.css?ver=2" rel="stylesheet">   		
        <!--[if lt IE 9]>
			<script src="js/html5shiv.js"></script>
			<script src="js/respond.min.js"></script>
        <![endif]-->
        <script src="http://libs.baidu.com/jquery/1.10.2/jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script> 
		
    </head>
    <body>
		<!-- 上方导航栏 -->
		<div class="navbar navbar-default navbar-fixed-top" role="navigation" id="navbar">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="sr-only">切换导航</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a href="#ad-carousel" class="navbar-brand">成绩管理</a>
			  </div>
			  <!-- 屏幕宽度小于768px时，div.navbar-responsive-collapse容器里的内容都会隐藏，显示icon-bar图标，当点击icon-bar图标时，再展开。屏幕大于768px时，默认显示。 -->
			  <div class="collapse navbar-collapse navbar-responsive-collapse" id="collapse">
					<ul class="nav navbar-nav">
						<li class="active"><a href="#ad-carousel">主页面</a></li>
						<li><a href="#ad-carousel">系统简介</a></li>
						<li><a href="#addinfo">录入信息</a></li>
						<li><a href="#findinfo">查询信息</a></li>
						<li><a href="#foot">关于</a></li>
					</ul>
			  </div>
			</div>
		</div>
		<!-- 上方导航栏结束 -->  
		
		<!-- 轮播 -->
		<div id="ad-carousel" class="carousel slide" data-ride="carousel">
			<!--轮播下方点-->
			<ol class="carousel-indicators">
				<li data-target="#ad-carousel" data-slide-to="0" class="active"></li>
				<li data-target="#ad-carousel" data-slide-to="1"></li>
			</ol>
			<!-- 轮播图-->
			<div class="carousel-inner">
				<div class="item active">
					<img src="images/1.png" alt="1 slide">

					<div class="container">
						<div class="carousel-caption">
							<h2>信息录入</h2>

							<p>录入成绩，就是这么任性。</p>

						</div>
					</div>
				</div>
				<div class="item">
					<img src="images/2.png" alt="2 slide">

					<div class="container">
						<div class="carousel-caption">
							<h2>信息获取</h2>

							<p>查询信息，就是这么酷炫。</p>

						</div>
					</div>
				</div>
				
			</div>
			<!-- 左右箭头 -->
			<a class="left carousel-control" href="#ad-carousel" data-slide="prev"><span
					class="glyphicon glyphicon-chevron-left"></span></a>
			<a class="right carousel-control" href="#ad-carousel" data-slide="next"><span
					class="glyphicon glyphicon-chevron-right"></span></a>
		</div>
		<!-- 轮播结束 -->
		
		
		<!-- 录入信息 -->
		<div class = "add" id="addinfo">
			<div class="container">
				<div class="row">
					<div class="col-md-12" id="add-form">
						<div class="form-title">
							录入信息
						</div>
						<!-- 表单开始 -->
						<div class = "cont-form">
							<form>
								<div class="row">
									<div class="col-md-6 col-sm-6 col-xs-12">
										<input class="form-control" type="text" name="major" id="major" placeholder="专业">
									</div>
									<div class="col-md-6 col-sm-6 col-xs-12">
										<input class="form-control" type="text" name="grade" id="grade" placeholder="班级">
									</div>
									<div class="col-md-12 col-sm-12 col-xs-12">
										<input class="form-control" type="text" name="sid" id="sid" placeholder="学号">
									</div>
									<div class="col-md-12 col-sm-12 col-xs-12">
										<input class="form-control" type="text" name="name" id="name" placeholder="姓名">
									</div>
									<div class="col-md-12 col-sm-12 col-xs-12">
										<input class="form-control" type="text" name="score" id="score" placeholder="成绩">
									</div>
									<div class="col-md-12 col-sm-12 col-xs-12">
										<input class="btn btn-primary" type="button" name="add" id="add" value="录入" >
									</div>
								</div>
							</form>
						<!-- 表单结束 -->
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- 录入信息结束 -->

		<!-- 查询信息 -->
		<div class = "find" id="findinfo">
			<div class="container">
				<div class="row">
					<div class="col-md-12" id="add-form">
						<div class="form-title">
							查询信息
						</div>
						<!-- 表单开始 -->
						<div class = "cont-form">
							<form>
								<div class="row">
									<div class="col-md-12 col-sm-12 col-xs-12">
										<input class="form-control" type="text" name="findcontent" id="findcontent" placeholder="查询内容">
									</div>
									<div class="col-md-12 col-sm-12 col-xs-12">
										<input class="btn btn-primary" type="button" name="findresult" id="findresult" value="查询" >
									</div>
								</div>
							</form>
						<!-- 表单结束 -->
						</div>
					</div>
				</div>
			</div>
			<div class="find-result" id="find-result" style="display: none">
				<div class="container">
					<table class="table table-striped">
						<tr>
							<th>专业</th>
							<th>年级</th>
							<th>学号</th>
							<th>姓名</th>
							<th>成绩</th>
						</tr>
				    </table>
				</div>
			</div>
		</div>
		<!-- 查询信息结束 -->

		<!-- 版权 -->
		<div class="foot" id="foot">
			 Copyright © 2015  学生成绩录入系统 
		</div>
		<!-- 版权结束 -->
		<div class="modal fade" id="mymodal">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
						<h4 class="modal-title">温馨提示</h4>
					</div>
					<div class="modal-body" id="modal-body">
						<p>提示框</p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary" data-dismiss="modal">关闭</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div><!-- /.modal -->
		<script>
		  $(function(){
			$("form #add").click(function(){
				var major = $("#major").val();
				var grade = $("#grade").val();
				var sid = $("#sid").val();
				var name = $("#name").val();
				var score = $("#score").val();
				var majorreg = /^\W+$/;
				var gradereg = /^\d{4}\.\d{1,2}$/;
				var sidereg = /^\d{5,}$/;
				var scorereg = /^\d{1,}$/;
				if (!majorreg.test(major)) {
					document.getElementById("modal-body").innerHTML = "请输入正确的专业"; 
					$("#mymodal").modal("toggle");	 
				} else if (!gradereg.test(grade)) {
					document.getElementById("modal-body").innerHTML = "请输入正确的年级"; 
					$("#mymodal").modal("toggle");	 
				} else if (!sidereg.test(sid)) {
					document.getElementById("modal-body").innerHTML = "请输入正确的学号"; 
					$("#mymodal").modal("toggle");	 
				} else if (name.length == 0) {
					document.getElementById("modal-body").innerHTML = "请输入正确的姓名"; 
					$("#mymodal").modal("toggle");	 
				} else if (!scorereg.test(score)) {
					document.getElementById("modal-body").innerHTML = "请输入正确的成绩"; 
					$("#mymodal").modal("toggle");	 
				} else {
					$("#add").val("正在录入");
					$.post("php/addinfo.php", {
						major:major,
						grade:grade,
						sid:sid,
						name:name,
						score:score
					}, function(msg) {
						if(msg == 1) {
							document.getElementById("modal-body").innerHTML = "录入信息成功"; 
							$("#mymodal").modal("toggle");	 
						} else {
							document.getElementById("modal-body").innerHTML = "录入信息失败"; 
							$("#mymodal").modal("toggle");	 
						}
						$("#add").val("录入");
					});
				}
			});
			$("form #findresult").click(function(){
				var findcontent = $("#findcontent").val();
				if (findcontent.length == 0) {
					document.getElementById("modal-body").innerHTML = "请输入查询的内容"; 
					$("#mymodal").modal("toggle");	 
				} else {
					$("#findresult").val("正在查询");
					$.post("php/findinfo.php", {
						content:findcontent
					}, function(msg) {
						$("#find-result").show();
						$("#find-result tr.content").remove();
						var data = JSON.parse(msg);
						$.each(data,function(index,content){
							var tr = $("<tr></tr>").addClass("content").appendTo($("#find-result table"));
							$.each(content,function(key,value){
								if (key == "major"||key == "grade"||key == "sid"||key == "name"||key == "score") {
									$("<td>"+value+"</td>").appendTo(tr);
								}
							});
						})
					});
					$("#findresult").val("查询");
				}
			});
		  });
		</script>
    </body>
</html>